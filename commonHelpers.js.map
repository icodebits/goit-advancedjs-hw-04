{"version":3,"file":"commonHelpers.js","sources":["../src/js/index.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    currentPage = 1;\n    currentQuery = e.target.searchQuery.value.trim();\n    if (currentQuery) {\n        await fetchImages(currentQuery, currentPage);\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    await fetchImages(currentQuery, currentPage);\n});\n\nasync function fetchImages(query, page) {\n    const apiKey = '44486034-0380855ab7a69aa1783ee0e98';\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data;\n\n        if (data.hits.length === 0 && page === 1) {\n            iziToast.info({ title: 'Info', message: 'Sorry, there are no images matching your search query. Please try again.' });\n        } else {\n            if (page === 1) {\n              iziToast.success({ title: 'Success', message: `Hooray! We found ${data.totalHits} images.` });\n            }\n            renderImages(data.hits);\n            if (data.totalHits > page * 40) {\n                loadMoreBtn.style.display = 'block';\n            } else {\n                loadMoreBtn.style.display = 'none';\n                if (page > 1) {\n                    iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n                }\n            }\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Failed to fetch images. Please try again later.' });\n    }\n}\n\nfunction renderImages(images) {\n    const markup = images.map(image => `\n        <div class=\"photo-card\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n                <p class=\"info-item\">\n                    <b>Likes</b> ${image.likes}\n                </p>\n                <p class=\"info-item\">\n                    <b>Views</b> ${image.views}\n                </p>\n                <p class=\"info-item\">\n                    <b>Comments</b> ${image.comments}\n                </p>\n                <p class=\"info-item\">\n                    <b>Downloads</b> ${image.downloads}\n                </p>\n            </div>\n        </div>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["searchForm","gallery","loadMoreBtn","currentPage","currentQuery","e","fetchImages","query","page","url","data","axios","iziToast","renderImages","images","markup","image"],"mappings":"wvBAIA,MAAMA,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAc,EACdC,EAAe,GAEnBJ,EAAW,iBAAiB,SAAU,MAAOK,GAAM,CAC/CA,EAAE,eAAc,EAChBJ,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAC5BC,EAAc,EACdC,EAAeC,EAAE,OAAO,YAAY,MAAM,KAAI,EAC1CD,GACA,MAAME,EAAYF,EAAcD,CAAW,CAEnD,CAAC,EAEDD,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,IACA,MAAMG,EAAYF,EAAcD,CAAW,CAC/C,CAAC,EAED,eAAeG,EAAYC,EAAOC,EAAM,CAEpC,MAAMC,EAAM,qEAA4C,mBAAmBF,CAAK,CAAC,6EAA6EC,CAAI,GAElK,GAAI,CAEA,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAElBC,EAAK,KAAK,SAAW,GAAKF,IAAS,EACnCI,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,0EAA0E,CAAE,GAEhHJ,IAAS,GACXI,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,oBAAoBF,EAAK,SAAS,UAAY,CAAA,EAE9FG,EAAaH,EAAK,IAAI,EAClBA,EAAK,UAAYF,EAAO,GACxBN,EAAY,MAAM,QAAU,SAE5BA,EAAY,MAAM,QAAU,OACxBM,EAAO,GACPI,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,4DAA4D,CAAE,GAIrH,MAAe,CACZA,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,iDAAiD,CAAE,CAChG,CACL,CAEA,SAASC,EAAaC,EAAQ,CAC1B,MAAMC,EAASD,EAAO,IAAIE,GAAS;AAAA;AAAA,wBAEfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,mCAG3BA,EAAM,KAAK;AAAA;AAAA;AAAA,mCAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,sCAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,uCAGbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAIjD,EAAE,KAAK,EAAE,EAEVf,EAAQ,mBAAmB,YAAac,CAAM,CAClD"}